!function(e){"use strict";var a={namespace:"rapid_cache"},n=(e(window),e(document));a.onReady=function(){a.$menuPage=e("#plugin-menu-page"),a.vars=window[a.namespace+"_menu_page_vars"],e(".plugin-menu-page-panel-heading",a.$menuPage).on("click",a.togglePanel),e(".plugin-menu-page-panels-open",a.$menuPage).on("click",a.toggleAllPanelsOpen),e(".plugin-menu-page-panels-close",a.$menuPage).on("click",a.toggleAllPanelsClose),e("[data-action]",a.$menuPage).on("click",a.doDataAction),e("[data-toggle-target]",a.$menuPage).on("click",a.doDataToggleTarget),e('select[name$="_enable\\]"], select[data-toggle~="enable-disable"]',a.$menuPage).not(".-no-if-enabled").on("change",a.enableDisable).trigger("change"),e(".plugin-delete-legacy-data").on("change",a.toggleMigrationDeleteLegacyData)},a.toggleMigrationDeleteLegacyData=function(a){var n=e(".plugin-action-migrate"),t=n.data("action-purge"),l=n.data("action-normal");e(this).is(":checked")?n.data("action",t):n.data("action",l)},a.toggleAllPanelsOpen=function(n){a.preventDefault(n),e(".plugin-menu-page-panel-heading",a.$menuPage).addClass("open").next(".plugin-menu-page-panel-body").addClass("open")},a.toggleAllPanelsClose=function(n){a.preventDefault(n),e(".plugin-menu-page-panel-heading",a.$menuPage).removeClass("open").next(".plugin-menu-page-panel-body").removeClass("open")},a.togglePanel=function(n){a.preventDefault(n),e(this).toggleClass("open").next(".plugin-menu-page-panel-body").toggleClass("open")},a.doDataAction=function(n){a.preventDefault(n);var t=e(this).data();("string"!=typeof t.confirmation||confirm(t.confirmation))&&(location.href=t.action)},a.enableDisable=function(a){var n=e(this),t=n.val(),l=(n.attr("name"),String(n.data("enabledStrings")||"1,2,3,4,5").split(/,+/)),i=-1!==e.inArray(t,l),o=n.closest(".plugin-menu-page-panel-body"),g=n.data("target"),r=g?e(g,o).filter(".plugin-menu-page-panel-if-enabled"):null,s=n.closest(".plugin-menu-page-panel-if-enabled"),p=s.find("> .plugin-menu-page-panel-if-enabled"),u=o.find("> .plugin-menu-page-panel-if-enabled");i?g?r.css("opacity",1).find(":input").removeAttr("readonly"):s.length?p.css("opacity",1).find(":input").removeAttr("readonly"):u.css("opacity",1).find(":input").removeAttr("readonly"):g?r.css("opacity",.4).find(":input").attr("readonly","readonly"):s.length?p.css("opacity",.4).find(":input").attr("readonly","readonly"):u.css("opacity",.4).find(":input").attr("readonly","readonly")},a.doDataToggleTarget=function(n){a.preventDefault(n);var t=e(this),l=e(t.data("toggleTarget"));l.is(":visible")?(l.hide(),t.find(".si").removeClass("si-eye-slash").addClass("si-eye")):(l.show(),t.find(".si").removeClass("si-eye").addClass("si-eye-slash"))},a.handleCacheClearAdminBarOpsChange=function(n){var t=e(this).val(),l=e(".-clear-cache-ops-ss",a.$menuPage);l.attr("src",l.attr("src").replace(/ops[0-9]\-ss\.png$/,"ops"+t+"-ss.png"))},a.handleCdnHostsChange=function(n){var t=e(this),l=e('input[name$="[cdn_host]"]',a.$menuPage);e.trim(t.val())?(l.val()&&l.data("hiddenValue",l.val()),l.attr("disabled","disabled").val("")):(l.val()||l.val(l.data("hiddenValue")),l.removeAttr("disabled"),t.val(""))},a.bytesToSizeLabel=function(e,a){if("number"!=typeof e||e<=1)return 1===e?"1 byte":"0 bytes";("number"!=typeof a||a<=0)&&(a=0);var n=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,n)).toFixed(a)+" "+["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][n]},a.numberFormat=function(e,a){return"number"!=typeof e?String(e):(("number"!=typeof a||a<=0)&&(a=0),e.toFixed(a).replace(/./g,function(e,a,n){return a&&"."!==e&&(n.length-a)%3==0?","+e:e}))},a.escHtml=function(e){var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return String(e).replace(/[&<>"']/g,function(e){return a[e]})},a.preventDefault=function(e,a){e&&(e.preventDefault(),a&&e.stopImmediatePropagation())},n.ready(a.onReady)}(jQuery);